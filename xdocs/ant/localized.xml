<?xml version="1.0"?>
<document>
    <title>Localized Resources Handling</title>

    <properties>
        <author>Andrei Adamchik</author>
    </properties>

    <body>
 		<section name="Localized Resources Handling">
			<p>WOApplication and WOFramework tasks must deal
 		     with resources. Resources of the applications that have a multilingual 
 		     audience require localization.</p>
 		     
 		     <p>In a deployed WebObjects application or framework
 		     resources are separated into "Resources" and "WebServerResources" directories. 
 		     For instance WOComponents are "Resources", images are "WebServerResources", etc.
 		     Both "Resources" and "WebServerResources" require special handling of localization issues.
 		     </p>
 		     
 		     <p>In WOProject tasks resources handling is normally done via 
 		     nested <code>&lt;resources&gt;</code> or <code>&lt;wsresources&gt;</code> elements
 		     that specify location of the resources. WOProject adds special handling
 		     of resources that are located in directories with extension <code>.lproj</code>.
 		     For instance:</p>
 		     
<source>
&amp;lt;woframework name="MyFramework" destDir="${dist}/Frameworks"&amp;gt;
   &amp;lt;-- No localization needed --&amp;gt;
   &amp;lt;resources dir="src/resources"&amp;gt;
       &amp;lt;include name="MyResources/*.wo/**"/&amp;gt;
   &amp;lt;/resources&amp;gt;
   
   &amp;lt;-- Localization required, since starts with *.lproj --&amp;gt;
   &amp;lt;wsresources dir="src/frameworks/WSResources"&amp;gt;
       &amp;lt;include name="*.lproj/Images/**"/&amp;gt;
   &amp;lt;/wsresources&amp;gt;
   
   &amp;lt;-- No localization needed, since path starts with "Images" --&amp;gt;
   &amp;lt;-- even though it contains *.lproj in the middle           --&amp;gt;
   &amp;lt;wsresources dir="src/frameworks/WSResources"&amp;gt;
       &amp;lt;include name="Images/*.lproj/**"/&amp;gt;
   &amp;lt;/wsresources&amp;gt;
&amp;lt;/woframework&amp;gt;
</source>

        <p>Here is how WOProject will handle resource copying:</p>
        <table>
        	<tr>
           		<th>WOComponents</th>
           		<th> </th>
        	</tr>
        	<tr>
           		<td>Not Localized</td>
           		<td>Copied to the top level resources directory ignoring any subdirectories.
           		For instance <font size="+1"><code>MyComponents/reusable/Comp.wo</code>
           		</font> will be copied to 
           		<font size="+1"><code>Resources/Comp.wo</code>
           		</font>.</td>
           	</tr>
           	<tr>
           		<td>Localized</td>
           		<td>Copied to the top level resources language-specific directory ignoring 
           		any subdirectories under *.lproj.
           		For instance <font size="+1"><code>English.lproj/MyComponents/reusable/Comp.wo</code>
           		</font> will be copied to 
           		<font size="+1"><code>Resources/English.lproj/Comp.wo</code>
           		</font>.</td>
           	</tr>
           	<tr>
	           	<td>Localized, but located in Nonlocalized.lproj</td>
           		<td>Copied to the top level resources directory ignoring any subdirectories.
           		For instance <font size="+1"><code>Nonlocalized.lproj/MyComponents/reusable/Comp.wo</code>
           		</font> will be 
           		copied to <font size="+1"><code>Resources/Comp.wo</code>
           		</font>.</td>
        	</tr>
        		<tr>
           		<th>Other resources</th>
           		<th> </th>
        	</tr>
        	<tr>
           		<td>Not Localized</td>
           		<td>Copied to the resources directory preserving subdirectories structure.
           		For instance <font size="+1"><code>Other/model.eomodeld</code>
           		</font> will be copied to 
           		<font size="+1"><code>Resources/Other/model.eomodeld</code>
           		</font>.</td>
           	</tr>
           	<tr>
           		<td>Localized</td>
           		<td>Copied to the top level resources language-specific directory preserving
           		subdirectories structure.
           		For instance <font size="+1"><code>English.lproj/Images/toolbar/i1.gif</code>
           		</font> will be copied to 
           		<font size="+1"><code>WebServerResources/English.lproj/Images/toolbar/i1.gif</code>
           		</font>.</td>
           	</tr>
           	<tr>
	           	<td>Localized, but located in Nonlocalized.lproj</td>
           		<td>Copied to the top level resources stripping "Nonlocalized.lproj", but
           		preserving lower level subdirectories.
           		For instance <font size="+1"><code>Nonlocalized.lproj/props/props.plist</code>
           		</font> will be 
           		copied to <font size="+1"><code>Resources/props/props.plist</code>
           		</font>.</td>
        	</tr>
        </table>
    	</section>
    </body>
</document>
