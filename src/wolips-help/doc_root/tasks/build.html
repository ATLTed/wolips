<html>
<head>
<title>Building</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body bgcolor="#FFFFFF">
<h1>Building WebObjects Applications</h1>
<p>WOLips is built on WOProject. That means the WebObjects frameworks and applications 
  are built using Ant scripts. These scripts may be executed internally (to Eclipse) 
  or as an External Tool. WOLips also contains an <a href="#incrementalbuilder">IncrementalBuilder</a> 
  and a <a href="#targetbuilder">TargetBuilder</a>. These were originally developed 
  outside the WOProject/WOLips project, but are now integral parts.</p>
<p>Ant scripts are highly configurable...</p>
<p>&nbsp;</p>
<h2><a name="incrementalbuilder"></a>Using IncrementalBuilder</h2>
<p>Developing a WebObjects &quot;project&quot; often involves developing a number 
  of framework:s and woa:s simultaneously. When you run or debug applications 
  you do, of course, want to make sure you always use the latest version of every 
  single piece of code. Executing the Ant script for a framework (re-building 
  the entire framework) everytime anything in that framework changed may become 
  impractical.</p>
<p>Eclipse always (and incrementally) keeps all Java code compiled and ready to 
  be executed and/or used by other Eclipse projects. WO projects are more than 
  just Java projects - so this &quot;always ready&quot; mechanism needs to be 
  extended to work with WO projects. This is what IncrementalBuilder does. During 
  development IncrementalBuilder replaces the Ant scripts. It does however not 
  produce installable frameworks or applications. You still need the Ant scripts 
  for that. The main (only) advantage of replacing the Ant scripts with IncrementalBuilder 
  during development is speed.</p>
<h3>Setting Things Up</h3>
<p>How to reconfigure existing WOLips projects to use IncrementalBuilder.</p>
<ol>
  <li>M</li>
  <li>...</li>
  <li>Make sure that WOLips is properly installed and the build.properties file 
    exists</li>
  <li>create Java Projects for your WebObjects Projects</li>
  <li>add a filter to the Package Explorer filtering out things called build (and 
    eg. WebComponents.*, for theCMSFramework)</li>
  <li>add a WebObjects Classpath container to the buildpath (Project Properties 
    / Build Path / Libraries / Advanced) and choose all the WebObjects Frameworks 
    you wish to use. (This step can be omitted on applications that use a common 
    framework if that framework exports the WebObjects classpath and if the application 
    doesn't need additional WO frameworks.)</li>
  <li>add all the .jar-files that are needed by the project (as "Internal Jar" 
    if they are in CVS, via add Variable if they are not). 
  <li>fix all the compilation problems (like wrong package names in classes)</li>
  <li>edit the Project Properties and check the "Is a WebObjects Project" checkbox 
    (also check "Is a Framework" for frameworks).</li>
  <li>create a launch configuration using the Run... menu</li>
  <li>change the runtime classpath and the source path to not be the default paths 
    (uncheck both checkboxes)</li>
  <li>(do this only after unchecking both checkboxes in the step above:) change 
    the Runtime Classpath by adding the build/&lt;projectname&gt;.woa/Contents/Resources/Java 
    Folder to the classpath <b>before</b> or instead of the Project itself</li>
  <li>(do the same for all WO-Frameworks in your Workspace, using the appropriate 
    Resources/Java folders).</li>
  <li>(this should in the future be done automatically by the Launch configuration)</li>
  <li>add the parameters -Duser.dir=&lt;path to the .woa directory under build&gt; 
    (or better: set this folder as the working directory for the application) 
    and -DWORootDirectory=&gt;$NEXT_ROOT&lt; (replacing &gt;$NEXT_ROOT&lt; with 
    the installation path of your WebObjects installation)</li>
  <li>turn on reloading of templates with -WODebuggingEnabled true (this may not 
    be exactly what is needed for template reloading ...)</li>
  <li>[don't turn on rapid-turnaround mode with -NSProjectSearchPath ("../..") 
    ]</li>
  <li>optional: set the port the application listens on with (e.g.) -WOPort 6666</li>
  <li>run the application</li>
</ol>
<h2><a name="targetbuilder"></a>Using TargetBuilder</h2>
<p>When you build JavaClient or Direct2JavaClient applications you build two separate 
  targets, one client and one server. These two targets need separate classpaths. 
  Normally you can only have one classpath definition set per project - normally 
  you would need to define one client-project and another server-project. The 
  <a href="../reference/plugins_features.html#targetbuilder">TargetBuilder plug-in</a> 
  contains mechanisms to overcome this limitation - it allows you to develop both 
  the client and server parts in the same project.</p>
<p>The basic idea is to define the targets and store their settings in a file 
  not used for anything else (not normally used by Eclipse). When you build, the 
  settings from this file are applied to the Eclipse project one target at the 
  time. For example; first the server target settings are applied and the server 
  target built, then the same thing happens for the client target and what ever 
  other targets there are. Each build uses the normal Eclipse JavaBuilder. When 
  building is complete the original, or normal, project settings are restored. 
  The Eclipse project classpath set must, of course, contain all resources needed 
  to compile the project's source code. A specific target's classpath would be 
  a subset of the project's.</p>
<h3>Setting Things Up</h3>
<p>The targets and their settings are defined in a file called targets.plist. 
  You have to create and maintain this file manually. You can use <a href="../examples/targets.plist">this 
  example</a> as a template. When you edit it you should remember this:</p>
<ul>
  <li>It should be kept directly under the project root.</li>
  <li>'classpath' are absolute paths</li>
  <li>'source', 'output' & 'projectclasspath' must start with '/' and are workspace 
    relative</li>
  <li>'projectclasspath' is a list of references to other projects</li>
  <li>You cannot use variables like NEXT_ROOT</li>
</ul>
<p>The WOLips context menu has two entries; Update TargetBuilder and Remove TargetBuilder. 
  (Although the menu option label is "Update TargetBuilder", a more correct label 
  would be "Remove & Add TargetBuilder".) </p>
<p>WOLips > Update TargetBuilder:</p>
<ul>
  <li>Replaces JavaBuilder with TargetBuilder (changes in .project).</li>
  <li>Updates .classpath with information from targets.plist. (Makes certain all 
    and any resources defined in targets.plist are included in .classpath.) </li>
</ul>
<p>WOLips > Remove TargetBuilder</p>
<ul>
  <li>Removes TargetBuilder and restores JavaBuilder (restores .project). </li>
</ul>
</body>
</html>
