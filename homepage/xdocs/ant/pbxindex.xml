<?xml version="1.0"?>
<document>
    <title>PBXIndex Task Manual</title>
    <body>
 		<section name="PBXIndex Task Manual">
			<h3>Description:</h3>

			<p><code>PBXIndex</code> is an Ant task to maintain a Project Builder
			(on Mac OS X, abbreviated PBX) PBX.pbproj file. It currently is not
			a general solution -- it exists solely to allow EOModeler to find your
			project's frameworks, which is required to make use of EOF's very cool
			prototypes feature.</p>

			<p>The general usage is:</p>
			<ol>
				<li>Generate the PBX.proj file.
				</li>
				<li>Open the PBX.proj file in PBX.
				</li>
				<li>Double-click the <code>.eomodel</code> file in PBX to open
				in EOModler.
				</li>
			</ol>
			
			<p>It's not enough to simply open your project's <code>.eomodel</code>
			file in the Finder -- you <b>must</b> open it in PBX for
			EOModeler to discover your project's frameworks.</p>

			<h3>Parameters:</h3>

			<table border="1" cellpadding="2" cellspacing="0">
				<tr>
					<th valign="top"><b>Attribute</b></th>
					<th valign="top"><b>Description</b></th>
					<th align="center" valign="top"><b>Required</b></th>
				</tr>
				<tr>
					<td valign="top">projectFile</td>
					<td valign="top">PBX.proj file location. If the file at
					the specified location does not exist, it is created.</td>
					<td valign="top" align="center">Yes</td>
				</tr>
			</table>

			<h3>Nested elements:</h3>

			<h4>resources</h4>
			<p>The nested <code>resources</code> element specifies a <a
			href="http://jakarta.apache.org/ant/manual/CoreTypes/fileset.html">FileSet</a>
			matching a set of project resources. You should stick your <code>.eomodel</code>
			files here.</p>
			
            <h4>frameworks</h4>
			<p>The nested <code>frameworks</code> is a <a
			href="http://jakarta.apache.org/ant/manual/CoreTypes/fileset.html">FileSet</a>
			structure that specifies the names of the
            WebObjects Frameworks that this application is dependant upon.</p>
            
			<h4>Nested <code>frameworks</code> Parameters: </h4>
			<p><i>Note: all standard FileSet 
			parameters are supported as well, though <code>dir</code>
			wouldn't make sense and will be ignored.</i></p>
            <table border="1" cellpadding="2" cellspacing="0">
				<tr>
					<th valign="top"><b>Attribute</b></th>
					<th valign="top"><b>Description</b></th>
					<th align="center" valign="top"><b>Required</b></th>
				</tr>
				<tr>
					<td valign="top">root</td>
					<td valign="top">Logical base location of the framework. Allowed values are 
					"wo.homeroot", "wo.wosystemroot", "wo.localroot" (these are string values,
					don't include them in <code>${}</code>)</td>
					<td valign="top" align="center">Yes</td>
				</tr>
				<tr>
					<td valign="top">if</td>
					<td valign="top">The name if a property that decides if the framework set is included. 
					This is a string value, don't include them in <code>${}</code>. You can then set the property to include the framework or leave it undefined to leave it out.</td>
					<td valign="top" align="center">Not applicable, leave it out when you want to include the framework by default.</td>
				</tr>
			</table>

			<h4>Examples:</h4>

<p>The <code>frameworks</code> declaration defined once and reused in by both
<a href="pbindex.html">PBIndex</a> and <code>PBXIndex</code>:
</p>

<source>
&amp;lt;typedef name="frameworks" classname="org.objectstyle.woproject.ant.FrameworkSet"/&amp;gt;
&amp;lt;frameworks root=".." id="developer.frameworks" embed="true"&amp;gt;
    &amp;lt;include name="MyFramework/out/MyFramework.framework"/&amp;gt;
&amp;lt;/frameworks&amp;gt;

&amp;lt;target name="build"&amp;gt;
    &amp;lt;taskdef name="pbindex" classname="org.objectstyle.woproject.ant.PBIndex"/&amp;gt;
    &amp;lt;pbindex name="Spike" projectFile="./PB.project"&amp;gt;
        &amp;lt;src dir="."&amp;gt;
            &amp;lt;include name="src/**/*.java"/&amp;gt;
        &amp;lt;/src&amp;gt;
        &amp;lt;resources dir="."&amp;gt;
            &amp;lt;include name="*.eomodeld"/&amp;gt;
            &amp;lt;include name="*.api"/&amp;gt;
        &amp;lt;/resources&amp;gt;
        &amp;lt;wocomponents dir="."&amp;gt;
            &amp;lt;include name="*.wo"/&amp;gt;
        &amp;lt;/wocomponents&amp;gt;
        &amp;lt;frameworks refid="developer.frameworks"/&amp;gt;
    &amp;lt;/pbindex&amp;gt;
    
    &amp;lt;taskdef name="pbxindex" classname="org.objectstyle.woproject.ant.PBXIndex"/&amp;gt;
    &amp;lt;pbxindex projectFile="./PBX.pbproj"&amp;gt;
        &amp;lt;resources dir="."&amp;gt;
            &amp;lt;include name="*.eomodeld"/&amp;gt;
        &amp;lt;/resources&amp;gt;
        &amp;lt;frameworks refid="developer.frameworks"/&amp;gt;
    &amp;lt;/pbxindex&amp;gt;
&amp;lt;/target&amp;gt;
</source>
    	</section>
    </body>
</document>
