<?xml version="1.0"?>

<!-- ======================================================== -->
<!--                 WOLips Ant file.                         -->
<!-- ======================================================== -->
<project name="woproject-wolips-dist" default="dist" basedir=".">

   <target name="dist">
    <!-- make feature -->
    <mkdir dir="${wolips.feature.dist}"/>
    <copy todir="${wolips.feature.dist}">
        <fileset dir="src/wolips-feature">
        	<exclude name=".project"/>
        </fileset>
    </copy>
    <copy todir="${wolips.dist.base}">
        <fileset dir="src/wolips-feature">
        	<exclude name=".project"/>
        </fileset>
    </copy>
    
    <!-- make wolips dist -->
    <tar tarfile="${wolips.dist.filename}.tar">
        <tarfileset dir="${wolips.dist.base}">
        	<exclude name="**/plugins/*.jar"/>
        	<exclude name="**/features/*.jar"/>
		<exclude name="feature.xml"/>
		<exclude name="feature.properties"/>
        </tarfileset>
     </tar>
         
     <gzip src="${wolips.dist.filename}.tar"
         zipfile="${wolips.dist.filename}.tar.gz"/>
     <delete file="${wolips.dist.filename}.tar"/>
     
     <!-- make wolips update dist -->
     <jar jarfile="${wolips.dist.filename}.jar">
     	<fileset dir="${wolips.dist.base}">
        	<include name="**/plugins/*.jar"/>
		<include name="feature.xml"/>
		<include name="feature.properties"/>
        </fileset>
    </jar>
    
    </target>
	
</project>
