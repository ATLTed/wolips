<?xml version="1.0"?>
 
<!-- ======================================================== -->
<!--              Script to build a plugin               -->
<!-- ======================================================== -->
<project name="build-plugin" default="" basedir=".">
    <!-- ============================================= -->
    <!-- Compiles Java classes                         -->
    <!-- Required parameters                           -->
    <!-- param.plugin.dir the plugin directory         -->
    <!-- param.java.dest.dir the javac output directory     -->
    <!-- classpath the classpath refid     -->
    <!-- ============================================= -->
    <target name="java">
        <path id="full.classpath">
	    <path refid="classpath"/>
            <fileset dir="${eclipse.home}/plugins">
                <include name="**/*.jar"/>
		<exclude name="**/org.objectstyle.*/**"/>
            </fileset>
        </path>

       <javac srcdir="${param.plugin.dir}/java"
                destdir="${param.java.dest.dir}"
                deprecation="${compile.deprecation}"
                debug="${compile.debug}"
                optimize="${compile.optimize}">
            <classpath refid="full.classpath"/>
        </javac>
    </target>

    <!-- ============================================= -->
    <!-- Copies the resources                          -->
    <!-- Required parameters                           -->
    <!-- param.plugin.dir the plugin directory         -->
    <!-- param.build.output.build.dir the output dir   -->
    <!-- param.plugin.name the plugin name             -->
    <!-- ============================================= -->
    <target name="copy.resources">
         <mkdir dir="${param.build.output.build.dir}/plugins/${param.plugin.name}"/>
         <copy todir="${param.build.output.build.dir}/plugins/${param.plugin.name}">
            <fileset dir="">
        	<exclude name="build.xml"/>
                <exclude name="default.properties"/>
        	<exclude name=".project"/>
                <exclude name=".classpath"/>
                <exclude name="**/java/**"/>
            </fileset>
        </copy>
    </target>

    <!-- ============================================= -->
    <!-- Jars Java classes                             -->
    <!-- Required parameters                           -->
    <!-- param.classes.dir                             -->
    <!-- param.classes.patternset.refid the classes    -->
    <!-- param.jar.file the jar file                   -->
    <!-- ============================================= -->
    <target name="jar">
	<jar jarfile="${param.jar.file}">
            <fileset dir="${param.classes.dir}">
		<patternset refid="param.classes.patternset.refid"/>
	    </fileset>
	</jar>
    </target>

    <!-- ============================================= -->
    <!-- Dist                                          -->
    <!-- Required parameters                           -->
    <!-- param.plugin.dir the plugin directory         -->
    <!-- param.build.output.build.dir the output dir   -->
    <!-- param.build.dist.build.dir the dist directory -->
    <!-- ============================================= -->
    <target name="dist">
    </target>
</project>
